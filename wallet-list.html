<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TGCC Explorer - Popular Wallet</title>
    <meta name="description" content="" />
    <meta name="keywords" content="bitcoin, ethereum, monero, ico, token, free token, btc, eth" />
    <meta name="author" content="TGCC" />
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/favicon.png" />
    <!-- Bootstrap & Plugins CSS -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="assets/css/purple.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="assets/css/public.css">

</head>

<body>
    <div class="loading-wrapper">
        <div class="loading">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Header Area Start ***** -->
    <header class="header-area">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            <!-- <img src="assets/images/logos/transparent-logo-purple.svg" class="light-logo" alt="SGU CHAIN"/>
								<img src="assets/images/logos/white-logo-purple.svg" class="dark-logo" alt="SGU CHAIN"/> -->
                            <img src="assets/images//logos/logo.png" class="light-logo" alt="TGCC CHAIN" />
                            <img src="assets/images/logos/logo.png" class="dark-logo" alt="TGCC CHAIN" />
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Lang Start ***** -->
                        <div class="lang">
                            <div class="selected">
                                <img src="assets/images/flags/china.png" alt="">
                                <i class="fa fa-angle-down"></i>
                            </div>
                            <!-- <select class="trans-en">
									<option value="简体中文">简体中文</option>
									<option value="English">English</option>
								</select> -->
                            <ul class="flag-list trans-en">
                                <li class="chinese-language">
                                    <a href="#">
                                        <img src="assets/images/flags/china.png" alt="">
                                        <span>简体中文</span>
                                    </a>
                                </li>
                                <li class="english-language">
                                    <a href="#">
                                        <img src="assets/images/flags/en.png" alt="">
                                        <span>English</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <!-- ***** Lang End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <li>
                                <a href="index.html">
                                    <span i18n="i18n.themselves">首页</span>
                                </a>
                            </li>
                            <li>
                                <a href="wallet-list.html">
                                    <span i18n="i18n.successful-case">钱包</span>
                                </a>
                            </li>
                            <li>

                                <a href="transaction-list.html">
                                    <span i18n="i18n.Intelligence-test">交易</span>
                                </a>
                            </li>
                            <li>
                                <a href="block-list.html">
                                    <span i18n="i18n.evaluation">区块</span>
                                </a>
                            </li>
                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->
    <!-- ***** Wellcome Area Start ***** -->
    <section class="block-explorer-wrapper bg-bottom-center" id="welcome-1">
        <div class="block-explorer text">
            <div class="container text-center">
                <div class="row">
                    <div class="col-lg-12 align-self-center">
                        <h1 i18n="i18n.Block browser">区块浏览器</h1>
                    </div>
                    <div class="offset-lg-3 col-lg-6">
                        <div style="display: flex;
                            justify-content: center;">
                            <p i18n="i18n.LatestBlockID">最新区块: </p>
                            <span style="padding-top: 2px;" class="latestBlockOfHead color-fff"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="search">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="input-wrapper">
                            <div class="input">
                                <input type="text" id="findContent" i18n="i18n.Please enter what you are looking for" class="search-box" placeholder="请输入您想查找的内容.">
                                <button class="search-btn">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ***** Wellcome Area End ***** -->
    <!-- 网络状态 -->
    <!--  <section class="block-explorer-features section pt-5 pb-0  mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <p class="section-title mb-2" i18n="i18n.network state">网络状态</p>
                </div>
            </div>
            <div class="row" id="latestData">
                <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                    <div class="item">
                        <div class="title">
                            <div class="icon"></div>
                            <h5 i18n="i18n.altitude">高度</h5>
                        </div>
                        <div class="text">
                            <span>4433.5
                                <i class="green fa fa-long-arrow-up"></i>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                    <div class="item">
                        <div class="title">
                            <div class="icon"></div>
                            <h5 i18n="i18n.supply">供应</h5>
                        </div>
                        <div class="text">
                            <span>216,853,789 ARD</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                    <div class="item">
                        <div class="title">
                            <div class="icon"></div>
                            <h5 i18n="i18n.account">账户</h5>
                        </div>
                        <div class="text">
                            <span>208919</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                    <div class="item">
                        <div class="title">
                            <div class="icon"></div>
                            <h5 i18n="i18n.node">节点</h5>
                        </div>
                        <div class="text">
                            <span>54个</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section> -->
    <!--  -->
    <!-- 热门钱包 -->
    <section class="section bg-bottom pt-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="center-heading">
                        <p class="section-title" i18n="i18n.Popularwallet">热门钱包</p>
                    </div>
                </div>
                <div class="offset-lg-3 col-lg-6">
                    <div class="center-text">
                        <!--                         <p>Popular wallet</p>
 -->
                    </div>
                </div>
            </div>
            <!-- table Start -->
            <section class="block-explorer-section section p-0 m-0">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="">
                                <table class="table table-striped table-latests table-responsive-stack alert-warning">
                                    <thead>
                                        <tr>
                                            <td i18n="i18n.class">等级</td>
                                            <td i18n="i18n.site">地址</td>
                                            <td i18n="i18n.balance">余额</td>
                                            <td i18n="i18n.publish">发行</td>
                                        </tr>
                                    </thead>
                                    <!-- 列表渲染 -->
                                    <tbody class="tbody-style" id="ThewalletLevel">
                                        <tr>
                                            <td colspan="4">
                                                暂无数据
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- 翻页 -->
                    <div>
                    </div>
            </section>
            <!-- table End -->
            </div>
    </section>
    <!-- end -->
    <!-- 分页 -->
    <section class="block-explorer-section section p-0 m-0">
        <div class="container containerOne">
            <div id="pagination"></div>
        </div>
    </section>
    <!--  -->
    <!-- ***** Contact & Footer Start ***** -->
    <footer id="contact">
        <div class="footer-bottom slim">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <p class="copyright">2019 © by TGCC</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- ***** Contact & Footer End ***** -->
    <!-- jQuery -->
    <script src="assets/js/jquery-2.1.0.min.js"></script>
    <script src="./assets/js/jquery.i18n.properties.min.js"></script>
    <!-- dbData -->
    <script src="assets/js/dbData.js"></script>

    <!-- Bootstrap -->
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/page.js"></script>
    <!-- Plugins -->
    <script src="assets/js/particles.min.js"></script>
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/jquery.downCount.js"></script>
    <script src="assets/js/parallax.min.js"></script>
    <!-- Global Init -->
    <script src="assets/js/particle-purple.js"></script>
    <script src="assets/js/custom.js"></script>
    <!-- jquery.i18n.js -->
    <script src="assets/js/jquery.i18n.js"></script>
    <script src="assets/layui/layui.all.js"></script>

    <script src="assets/js/app.js"></script>

    <script>
        $(document).ready(function() {

            var BURL = 'http://124.70.148.13:4103/api/'
                //请
            var list = {};

            const render = function(data, page, pageSize, supply) {
                page = page || 1;
                var count = 0;
                if (page && pageSize) {
                    count = (page - 1) * pageSize;

                }
                console.log(pageSize, 111)
                var ThewalletLevel = data;
                var ThewalletLevelInfo = "";
                ThewalletLevel.forEach((ele, index) => {
                    ThewalletLevelInfo += `
                        <tr>
                            <td>${count + index + 1}</td>
                            <td class="addressIDDeail"><a href="wallet-detail.html?id=${ele.address}">${getAddressUsername(ele.address,true)}</a></td>
                            <td>${(ele.balance / Math.pow(10, 8)).toFixed(2)}T</td>
                            <!-- <td>${(ele.balance / 1000000000000000).toFixed(2)}%</td> -->
                            <td>
                                <div class="table-progress">
                                        <div class="progress-line" data-value="${(ele.balance*100 / supply).toFixed(2)}%"  style="width: ${(ele.balance*100 / supply).toFixed(2)}%;"></div>
                                        <span>${(ele.balance*100 / supply).toFixed(2)}%</span>
                                </div>
                            </td>
                        </tr>
                        `
                });
                $("#ThewalletLevel").html(ThewalletLevelInfo);
                $("tbody > tr > td.addressIDDeail").click(function(e) {
                    var addressId = e.target.text;
                    console.log(addressId);
                    localStorage.setItem("addressId", addressId);
                    window.location.href = `wallet-detail.html?id=${addressId}`
                })
            }


            var initPageNumber = $.getUrlParam('page') || 1;
            console.log(initPageNumber);


            $.ajax({
                //请求方式
                type: "GET",
                //请求的媒体类型
                contentType: "application/json;charset=UTF-8",
                //请求地址
                url: BURL + "v2/blockchain",
                //请求成功
                success: function(result) {

                    $.ajax({
                        //请求方式
                        type: "GET",
                        //请求的媒体类型
                        contentType: "application/json;charset=UTF-8",
                        //请求地址
                        // url: BURL + "v2/wallets",
                        url: BURL + `v2/wallets?orderBy=balance&limit=10&page=` + initPageNumber,

                        //请求成功
                        success: function(res) {
                            render(res.data, initPageNumber, 10, result.data.supply)

                            console.log('hahsahsd');
                            console.log(res.data);

                            $('#pagination').pagination({
                                pages: res.meta.pageCount,
                                edges: 2,
                                prevText: $.getLang() == 'en' ? "Prev" : "上一页",
                                nextText: $.getLang() == "en" ? "Next" : "下一页",
                                cssStyle: 'pagination-sm',
                                displayedPages: 5,
                                onPageClick: function(pageNumber, event) {
                                    //点击时调用
                                    console.log(pageNumber);
                                    // console.log(event);
                                    if (pageNumber == 1) {
                                        $(".prev").attr("disabled", "disabled");
                                        // alert('第一页了，不能点击了');
                                    }
                                    if (pageNumber == res.meta.pageCount) {
                                        $(".next").attr("disabled", "disabled");
                                        // alert('最后一页了，不能点击了');
                                    }
                                    $.ajax({
                                        type: "GET",
                                        url: BURL + `v2/wallets?orderBy=balance&limit=10&page=${pageNumber + 1}`,
                                        success(res2) {
                                            console.log(res2);
                                            render(res2.data, pageNumber, 10, result.data.supply);
                                            console.log(res2.data);
                                        }
                                    })
                                },
                                onInit: function(getid) {
                                    //刷新时调用
                                    // render(getid);
                                    // console.log(getid);
                                }

                            });
                        }

                    })

                }

            });

        })
    </script>

</body>

</html>